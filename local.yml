---
- hosts: localhost
  become: yes
  tasks:
  
  - name: Copy wallpaper
    copy:
      src: files/ansible_wallpaper.jpg
      dest: /usr/share/backgrounds/ansible_wallpaper.jpg
      owner: root
      group: root

  - name: Install missing packages
    package:
      name: virtualbox-guest-dkms,virtualbox-guest-x11,arc-theme
      state: present

  #- name: Copy script to tmp before running it
    #copy:
      #src: files/test.sh
      #dest: /tmp/test.sh
      #owner: root
      #group: root
      #mode: 0777   
 
- hosts: localhost
  tasks:
  
  #- name: test script
    #script: /tmp/test.sh  
      
  - name: Chnage the wallpaper
    dconf:
      key: "/org/gnome/desktop/background/picture-uri"
      value: "'file:///usr/share/backgrounds/ansible_wallpaper.jpg'"
  - name: Chnage the theme
    dconf:      
      key: "/org/gnome/desktop/interface/gtk-theme"
      value: "'Arc-Dark'"
  - name: Chnage the icons
    dconf:      
      key: "/org/gnome/desktop/interface/icon-theme"
      value: "'TelaBudgie'"
  - name: disable attached modal
    dconf:      
      key: "/org/gnome/mutter/attach-modal-dialogs"
      value: "false"
  - name: change layout
    dconf:      
      key: "/com/solus-project/budgie-panel/layout"
      value: "'redmond'"
